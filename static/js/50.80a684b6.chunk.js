(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{133:function(e,l,n){},135:function(e,l,n){"use strict";n.d(l,"a",function(){return o});var a=n(4),t=n(5),r=n(7),c=n(6),u=n(8),m=n(0),p=n.n(m),o=(n(136),function(e){function l(){return Object(a.a)(this,l),Object(r.a)(this,Object(c.a)(l).apply(this,arguments))}return Object(u.a)(l,e),Object(t.a)(l,[{key:"componentDidMount",value:function(){}},{key:"clickPosBtn",value:function(e){var l=document.getElementById(e);window.scrollTo({top:l.offsetTop-10,left:0,behavior:"smooth"})}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"headerLink"},p.a.createElement("div",{className:"content"},p.a.createElement("div",{className:"real-content"},p.a.createElement("div",{className:"tag"},"Reading Assistance \xb7"),this.props.headerLink.map(function(l,n){return p.a.createElement("span",{className:"a"+l.level,key:n,onClick:e.clickPosBtn.bind(e,l.title)},l.title)}))))}}]),l}(p.a.Component))},136:function(e,l,n){},89:function(e,l,n){"use strict";n.r(l),n.d(l,"default",function(){return s});var a=n(4),t=n(5),r=n(7),c=n(6),u=n(8),m=n(0),p=n.n(m),o=(n(133),n(135)),s=function(e){function l(){var e;return Object(a.a)(this,l),(e=Object(r.a)(this,Object(c.a)(l).call(this))).state={headerLink:[{level:"h3",title:"Proxy"},{level:"h3",title:"\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684 MVVM \u6846\u67b6"}]},e}return Object(u.a)(l,e),Object(t.a)(l,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return p.a.createElement("div",null,p.a.createElement(o.a,{headerLink:this.state.headerLink}),p.a.createElement("div",{className:"article"},p.a.createElement("div",{className:"title-content"},p.a.createElement("h1",{className:"title"},"\u7528Proxy\u5b9e\u73b0MVVM\u53cc\u5411\u7ed1\u5b9a")),p.a.createElement("blockquote",null,p.a.createElement("p",null,"\u5728\u4e4b\u524d\u6211\u4eec\u4e86\u89e3\u5230 VUE \u7684\u6846\u67b6\u5e95\u5c42\u901a\u8fc7 ",p.a.createElement("code",null,"Object.defineProperty()")," \u6765\u5b9e\u73b0\u53cc\u5411\u7ed1\u5b9a\u7684\u3002\u90a3\u8fd9\u6b21\u54b1\u4eec\u5c31\u6765\u73a9\u70b9\u4e0d\u4e00\u6837\u7684\uff0c\u7528 ES6 \u7684 Proxy \u6765\u5b9e\u73b0 MVVM \u7684\u53cc\u5411\u7ed1\u5b9a\u3002")),p.a.createElement("h3",{id:"Proxy"},"Proxy"),p.a.createElement("p",null,"\u9996\u5148\u6765\u4e86\u89e3\u4e00\u4e0b ",p.a.createElement("code",null,"Proxy")," \uff0c\u8be5\u5bf9\u8c61\u7528\u4e8e\u5b9a\u4e49\u57fa\u672c\u64cd\u4f5c\u7684\u81ea\u5b9a\u4e49\u884c\u4e3a\uff08\u5982\u5c5e\u6027\u67e5\u627e\uff0c\u8d4b\u503c\uff0c\u679a\u4e3e\uff0c\u51fd\u6570\u8c03\u7528\u7b49\uff09\u3002\u770b\u4e0b\u9762\u7684\u57fa\u7840\u793a\u4f8b\uff1a"),p.a.createElement("pre",null,p.a.createElement("code",null,p.a.createElement("span",null),p.a.createElement("span",null,"let handler = ","{"),p.a.createElement("span",null,"    // \u83b7\u53d6\u5c5e\u6027\u65f6\u6267\u884c\u7684\u56de\u8c03\u51fd\u6570"),p.a.createElement("span",null,"    get: function(target, name)","{"),p.a.createElement("span",null,"        return name in target ? target[name] : 37;"),p.a.createElement("span",null,"    },"),p.a.createElement("span",null,"    // \u8bbe\u7f6e\u5c5e\u6027\u65f6\u6267\u884c\u7684\u56de\u8c03\u51fd\u6570"),p.a.createElement("span",null,"    set: function (obj, prop, value) ","{"),p.a.createElement("span",null,"        ..."),p.a.createElement("span",null,"    }"),p.a.createElement("span",null,"};"),p.a.createElement("span",null),p.a.createElement("span",null,"let p = new Proxy(","{","}, handler); // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u88ab\u5305\u88c5\u7684\u76ee\u6807\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5404\u79cd\u64cd\u4f5c\u56de\u8c03\u51fd\u6570\u7684\u96c6\u5408"),p.a.createElement("span",null),p.a.createElement("span",null,"p.a = 1; "),p.a.createElement("span",null,"p.b = undefined;"),p.a.createElement("span",null),p.a.createElement("span",null,"console.log(p.a, p.b);    // 1, undefined"),p.a.createElement("span",null,"console.log('c' in p, p.c);    // false, 37"),p.a.createElement("span",null))),p.a.createElement("h3",{id:"\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684 MVVM \u6846\u67b6"},"\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684 MVVM \u6846\u67b6"),p.a.createElement("p",null,"\u597d\u4e86\uff0c\u6709\u4e86\u8fd9\u4e2a\u524d\u63d0\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u5c01\u88c5\u6211\u4eec\u7684\u201c\u6846\u67b6\u201d\u4e86\u3002"),p.a.createElement("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a",p.a.createElement("code",null,"viewModel"),"\u5bf9\u8c61,\u5e76\u5c06\u5176\u8d4b\u503c\u4e3a\u4e00\u4e2aProxy\u5bf9\u8c61\uff0c\u8bbe\u7f6e",p.a.createElement("code",null,"set"),"\u56de\u8c03\u51fd\u6570\uff0c\u5f53\u5c5e\u6027\u503c\u88ab\u4fee\u6539\u65f6\u4fbf\u53ef\u4ee5\u6267\u884c\u5bf9\u5e94\u7684\u64cd\u4f5c\u3002"),p.a.createElement("pre",null,p.a.createElement("code",null,p.a.createElement("span",null),p.a.createElement("span",null,"let viewModel = ","{"),p.a.createElement("span",null,'    a: "111"'),p.a.createElement("span",null,"}"),p.a.createElement("span",null),p.a.createElement("span",null,"let handler = ","{"),p.a.createElement("span",null,"    set: function (obj, prop, newValue) ","{"),p.a.createElement("span",null,"        let oldValue = obj[prop]"),p.a.createElement("span",null,"        if (oldValue != newValue) ","{"),p.a.createElement("span",null,"            obj[prop] = newValue"),p.a.createElement("span",null,"            console.log(`$","{","prop} is changing from $","{","oldValue} to $","{","newValue}`)"),p.a.createElement("span",null,"        }"),p.a.createElement("span",null,"    }"),p.a.createElement("span",null,"}"),p.a.createElement("span",null,"viewModel = new Proxy(viewModel, handler);"),p.a.createElement("span",null))),p.a.createElement("p",null,"\u7136\u540e\u6211\u4eec\u8fdb\u884c\u5355\u5411\u7ed1\u5b9a\uff0c\u5c06\u6211\u4eec\u7684dom\u4e2d\u7684value\u503c\u548cviewModel\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5f53value\u503c\u53d8\u5316\u65f6\uff0cviewModel\u4f1a\u81ea\u52a8\u8fdb\u884c\u66f4\u65b0\u3002\u8fd9\u91cc\u6211\u4eec\u6a21\u62dfdom\u5143\u7d20\u4e2d\u7684model\u5c5e\u6027\u503c\u5bf9\u5e94\u7ed1\u5b9aviewModel\u4e2d\u7684\u5c5e\u6027\u503c\u3002"),p.a.createElement("pre",null,p.a.createElement("code",null,p.a.createElement("span",null),p.a.createElement("span",null,"// html"),p.a.createElement("span",null,'<input id=\'input\' type="text" model="a">'),p.a.createElement("span",null),p.a.createElement("span",null,"// js"),p.a.createElement("span",null,"// \u83b7\u53d6\u6240\u6709\u9700\u8981\u7ed1\u5b9a\u7684dom\u5143\u7d20"),p.a.createElement("span",null,"let modelElements = document.querySelectorAll('[model]');"),p.a.createElement("span",null,"// \u7ed1\u5b9a\u4e8b\u4ef6"),p.a.createElement("span",null,"function init() ","{"),p.a.createElement("span",null,"    modelElements.forEach(element => ","{"),p.a.createElement("span",null,"        let prop = element.getAttribute('model')"),p.a.createElement("span",null,"        if (prop in viewModel) ","{"),p.a.createElement("span",null,"            element.value = viewModel[prop];"),p.a.createElement("span",null,"            element.addEventListener('keyup', function () ","{"),p.a.createElement("span",null,"                viewModel[prop] = element.value"),p.a.createElement("span",null,"            })"),p.a.createElement("span",null,"        }"),p.a.createElement("span",null,"    })"),p.a.createElement("span",null,"}"),p.a.createElement("span",null,"init()"),p.a.createElement("span",null))),p.a.createElement("p",null,"\u8fd9\u6837\u5f53\u6211\u4eec\u4fee\u6539 input \u7684\u503c\u7684\u65f6\u5019\uff0c\u63a7\u5236\u53f0\u5c31\u4f1a\u8f93\u51fa\u65e5\u5fd7\uff0cviewModel\u5bf9\u5e94\u7684\u5c5e\u6027\u503c\u4f1a\u540c\u6b65\u66f4\u65b0\u3002\u4e0b\u9762\u6211\u4eec\u7ee7\u7eed\u8fdb\u884c\u53e6\u4e00\u5411\u7684\u7ed1\u5b9a\uff1a\u5f53\u4fee\u6539 viewModel \u7684\u5c5e\u6027\u503c\uff0c\u5bf9\u5e94\u7ed1\u5b9a\u7684 dom \u5143\u7d20\u7684\u503c\u4e5f\u4f1a\u53d1\u751f\u53d8\u5316\u3002\u4ee3\u7801\u5982\u4e0b\uff1a"),p.a.createElement("pre",null,p.a.createElement("code",null,p.a.createElement("span",null),p.a.createElement("span",null,"// \u5f53 viewModel \u7684\u67d0\u4e2a\u5c5e\u6027\u88ab\u4fee\u6539\u65f6\uff0c\u52a8\u6001\u4fee\u6539\u88ab\u7ed1\u5b9a\u7684dom\u503c"),p.a.createElement("span",null,"function setValue(prop) ","{"),p.a.createElement("span",null,"    modelElements.forEach(element => ","{"),p.a.createElement("span",null,"        if (element.getAttribute('model') === prop) ","{"),p.a.createElement("span",null,"            element.value= viewModel[prop]"),p.a.createElement("span",null,"        }"),p.a.createElement("span",null,"    })"),p.a.createElement("span",null,"}"),p.a.createElement("span",null),p.a.createElement("span",null,"// \u4fee\u6539 handler \u7684set\u51fd\u6570"),p.a.createElement("span",null,"let handler = ","{"),p.a.createElement("span",null,"    set: function (obj, prop, newValue) ","{"),p.a.createElement("span",null,"        let oldValue = obj[prop]"),p.a.createElement("span",null,"        if (oldValue != newValue) ","{"),p.a.createElement("span",null,"            console.log(`$","{","prop} is changing from $","{","oldValue} to $","{","newValue}`)"),p.a.createElement("span",null,"            obj[prop] = newValue"),p.a.createElement("span",null,"            // \u6dfb\u52a0 setValue \u51fd\u6570"),p.a.createElement("span",null,"            setValue(prop)"),p.a.createElement("span",null,"        }"),p.a.createElement("span",null,"    }"),p.a.createElement("span",null,"}"),p.a.createElement("span",null))),p.a.createElement("p",null,"\u8fd9\u6837\uff0c\u53cc\u5411\u7ed1\u5b9a\u5c31\u5b8c\u6210\u5566\uff0c\u6211\u4eec\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a setTimeout \u8fdb\u884c\u9a8c\u8bc1\uff1a"),p.a.createElement("pre",null,p.a.createElement("code",null,p.a.createElement("span",null),p.a.createElement("span",null,"setTimeout(() => ","{"),p.a.createElement("span",null,"    viewModel.a = 233"),p.a.createElement("span",null,"}, 1000)"),p.a.createElement("span",null))),p.a.createElement("p",null,"\u4e00\u79d2\u4e2d\u540e\uff0cinput\u4e2d\u7684\u503c\u7531 \u2018111\u2019 \u53d8\u4e3a \u2018233\u2019\u3002\u6210\u529f\uff5e"),p.a.createElement("blockquote",null,p.a.createElement("p",null,"\u5b8c\u6574\u4ee3\u7801\uff1ahttps://github.com/MagicalDinosaur/demos/blob/master/proxy/mvvm.html"))))}}]),l}(p.a.Component)}}]);
//# sourceMappingURL=50.80a684b6.chunk.js.map