{"version":3,"sources":["components/headerLink.tsx","article/深入webpack4.0（三）原理.js"],"names":["Main","idName","dom","document","getElementById","window","scrollTo","top","offsetTop","left","behavior","_this","this","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","props","headerLink","map","item","index","level","key","onClick","clickPosBtn","bind","title","React","Component","Template","Object","_Users_dinosaur_webtest_dinosaur_blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_dinosaur_webtest_dinosaur_blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_dinosaur_webtest_dinosaur_blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","_components_headerLink__WEBPACK_IMPORTED_MODULE_7__","id"],"mappings":"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","file":"static/js/47.e91fb92e.chunk.js","sourcesContent":["import React from 'react'\nimport \"../style/components/headerLink.scss\"\nexport default class Main extends React.Component<any, any>{\n    componentDidMount() { }\n\n    clickPosBtn(idName: string) {\n        const dom: any = document.getElementById(idName);\n        window.scrollTo({\n            top: dom.offsetTop - 10,\n            left: 0,\n            behavior: 'smooth'\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"headerLink\">\n                <div className=\"content\">\n                    <div className=\"real-content\">\n                        <div className='tag'>Reading Assistance ·</div>\n                        {\n                            this.props.headerLink.map((item: any, index: number) => {\n                                return <span className={'a' + item.level} key={index} onClick={this.clickPosBtn.bind(this, item.title)}>{item.title}</span>\n                            })\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react'\nimport '../style/main.scss'\nimport HeaderLink from \"../components/headerLink\"\nexport default class Template extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            headerLink: [{\"level\":\"h3\",\"title\":\"image-webpack-loader 图片压缩\"},{\"level\":\"h3\",\"title\":\"使用 url-loader 将文件转为 DataURL\"},{\"level\":\"h3\",\"title\":\"分离代码文件\"}]\n        }\n    }\n    componentDidMount() {\n    }\n    render() {\n        return (\n            <div>\n                <HeaderLink headerLink={this.state.headerLink}></HeaderLink>\n                <div className=\"article\">\n<div className=\"title-content\"><h1 className=\"title\">深入webpack4.0（三）优化</h1></div>\n<blockquote>\n  <p>这一环节我们来聊一聊如何通过配置webpack来使在生产环境构建时来优化我们的项目代码。</p>\n</blockquote>\n\n<h3 id='image-webpack-loader 图片压缩'>image-webpack-loader 图片压缩</h3>\n\n<blockquote>\n  <p>之前使用 file-loader 来处理图片文件，在此基础上，再添加一个 image-webpack-loader 来压缩图片文件。配置如下：</p>\n</blockquote>\n\n<pre><code><span></span>\n<span>rules:[</span>\n<span>    ...</span>\n<span>      {'{'}</span>\n<span>        test: /\\.(jpg|jpeg|png|gif)$/,</span>\n<span>        use: [</span>\n<span>            {'{'}</span>\n<span>                loader: 'file-loader',</span>\n<span>                options: {'{'}</span>\n<span>                    name: '[name].[ext]',</span>\n<span>                    outputPath: 'assets/img'</span>\n<span>                }</span>\n<span>            },</span>\n<span>            // 图片压缩</span>\n<span>            {'{'}</span>\n<span>                loader: 'image-webpack-loader',</span>\n<span>                options: {'{'}</span>\n<span>                    mozjpeg: {'{'} // 压缩 jpeg 的配置</span>\n<span>                        progressive: true,</span>\n<span>                        quality: 65</span>\n<span>                    },</span>\n<span>                    optipng: {'{'} // 使用 imagemin-optipng 压缩 png，enable: false 为关闭</span>\n<span>                        enabled: false,</span>\n<span>                    },</span>\n<span>                    pngquant: {'{'} // 使用 imagemin-pngquant 压缩 png</span>\n<span>                        quality: '65-90',</span>\n<span>                        speed: 4</span>\n<span>                    },</span>\n<span>                    gifsicle: {'{'} // 压缩 gif 的配置</span>\n<span>                        interlaced: false,</span>\n<span>                    },</span>\n<span>                }</span>\n<span>            },</span>\n<span>        ]</span>\n<span>]</span>\n<span></span>\n</code></pre>\n\n<h3 id='使用 url-loader 将文件转为 DataURL'>使用 url-loader 将文件转为 DataURL</h3>\n\n<blockquote>\n  <p>url-loader封装了 file-loader ,拥有其基本功能所以不需要依赖 file-loader，当图片大小小于limit值时，会直接将文件资源转为 base64 编码的 DataURL。</p>\n</blockquote>\n\n<p>配置如下：</p>\n\n<pre><code><span></span>\n<span>rules:[</span>\n<span>    ...</span>\n<span>      {'{'}</span>\n<span>        test: /\\.(jpg|jpeg|png|gif)$/,</span>\n<span>        use: [</span>\n<span>            {'{'}</span>\n<span>                loader: 'url-loader',</span>\n<span>                options: {'{'}</span>\n<span>                    limit: 8192, // 单位是 Byte，当文件小于 8KB 时作为 DataURL 处理</span>\n<span>                }</span>\n<span>            },</span>\n<span>            // 图片压缩</span>\n<span>            {'{'}</span>\n<span>                loader: 'image-webpack-loader',</span>\n<span>                options: {'{'}</span>\n<span>                    mozjpeg: {'{'} // 压缩 jpeg 的配置</span>\n<span>                        progressive: true,</span>\n<span>                        quality: 65</span>\n<span>                    },</span>\n<span>                    optipng: {'{'} // 使用 imagemin-optipng 压缩 png，enable: false 为关闭</span>\n<span>                        enabled: false,</span>\n<span>                    },</span>\n<span>                    pngquant: {'{'} // 使用 imagemin-pngquant 压缩 png</span>\n<span>                        quality: '65-90',</span>\n<span>                        speed: 4</span>\n<span>                    },</span>\n<span>                    gifsicle: {'{'} // 压缩 gif 的配置</span>\n<span>                        interlaced: false,</span>\n<span>                    },</span>\n<span>                }</span>\n<span>            },</span>\n<span>        ]</span>\n<span>]</span>\n<span></span>\n</code></pre>\n\n<h3 id='分离代码文件'>分离代码文件</h3>\n\n<blockquote>\n  <p>假设我们原本页面的静态资源都打包成一个 JS 文件，加载页面时虽然只需要加载一个 JS 文件，但是我们的代码一旦改变了，用户访问新的页面时就需要重新加载一个新的 JS 文件。有些情况下，我们只是单独修改了样式，这样也要重新加载整个应用的 JS 文件，相当不划算。所以分离代码文件是为了更好的利用缓存，减少不必要的开支。</p>\n</blockquote>\n\n<p>Webpcak4.0 可以直接通过 optimization 来进行配置：</p>\n\n<pre><code><span></span>\n<span>module.exports = {'{'}</span>\n<span>  // ... webpack 配置</span>\n<span></span>\n<span>  optimization: {'{'}</span>\n<span>    splitChunks: {'{'}</span>\n<span>      chunks: \"all\", // 所有的 chunks 代码公共的部分分离出来成为一个单独的文件</span>\n<span>    },</span>\n<span>  },</span>\n<span>}</span>\n<span></span>\n</code></pre>\n\n<p>但是，我们建议将第三方类库显式地配置为公共的部分，因为第三方类库的更新频率较低。配置如下：</p>\n\n<pre><code><span></span>\n<span>optimization: {'{'}</span>\n<span>    splitChunks: {'{'}</span>\n<span>        cacheGroups: {'{'}</span>\n<span>            commons: {'{'}</span>\n<span>                name: 'commons',</span>\n<span>                chunks: 'initial',</span>\n<span>                minChunks: 2</span>\n<span>            }</span>\n<span>        }</span>\n<span>    },</span>\n<span>},</span>\n<span></span>\n</code></pre>\n</div>\n            </div>\n\n        )\n    }\n}"],"sourceRoot":""}