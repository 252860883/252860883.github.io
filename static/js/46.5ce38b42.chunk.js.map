{"version":3,"sources":["components/headerLink.tsx","article/深入webpack4.0（一）配置及部分原理.js"],"names":["Main","idName","dom","document","getElementById","window","scrollTo","top","offsetTop","left","behavior","_this","this","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","props","headerLink","map","item","index","level","key","onClick","clickPosBtn","bind","title","React","Component","Template","Object","_Users_dinosaur_webtest_dinosaur_blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_dinosaur_webtest_dinosaur_blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_dinosaur_webtest_dinosaur_blog_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","_components_headerLink__WEBPACK_IMPORTED_MODULE_7__","id"],"mappings":"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","file":"static/js/46.5ce38b42.chunk.js","sourcesContent":["import React from 'react'\nimport \"../style/components/headerLink.scss\"\nexport default class Main extends React.Component<any, any>{\n    componentDidMount() { }\n\n    clickPosBtn(idName: string) {\n        const dom: any = document.getElementById(idName);\n        window.scrollTo({\n            top: dom.offsetTop - 10,\n            left: 0,\n            behavior: 'smooth'\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"headerLink\">\n                <div className=\"content\">\n                    <div className=\"real-content\">\n                        <div className='tag'>Reading Assistance ·</div>\n                        {\n                            this.props.headerLink.map((item: any, index: number) => {\n                                return <span className={'a' + item.level} key={index} onClick={this.clickPosBtn.bind(this, item.title)}>{item.title}</span>\n                            })\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react'\nimport '../style/main.scss'\nimport HeaderLink from \"../components/headerLink\"\nexport default class Template extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            headerLink: [{\"level\":\"h3\",\"title\":\"1. 为什么用webpack？\"},{\"level\":\"h3\",\"title\":\"2. 安装\"},{\"level\":\"h3\",\"title\":\"3. 入口与输出\"},{\"level\":\"h3\",\"title\":\"4. Loader\"},{\"level\":\"h3\",\"title\":\"5. Plugin\"},{\"level\":\"h3\",\"title\":\"6. Resolve\"},{\"level\":\"h3\",\"title\":\"总结\"}]\n        }\n    }\n    componentDidMount() {\n    }\n    render() {\n        return (\n            <div>\n                <HeaderLink headerLink={this.state.headerLink}></HeaderLink>\n                <div className=\"article\">\n<div className=\"title-content\"><h1 className=\"title\">深入webpack4.0（一）整体架构</h1></div>\n<blockquote>\n  <p>webpack 是一个 JS 代码模块化的打包工具，藉由它强大的扩展能力，随着社区的发展，逐渐成为一个功能完善的构建工具。但是平时开发业务的时候许多框架都提供了完善的脚手架，使得我们在开发业务的时候很省事，却对webpack越来越陌生，所以由此来对webpack来次深入的了解。</p>\n  \n  <h3 id='1. 为什么用webpack？'>1. 为什么用webpack？</h3>\n</blockquote>\n\n<p>随着前端工程化的发展，涌现出了许多框架类库，但是这些源代码无法直接运行，需要经过工具转化才可以。除了webpack这个构建工具，还有我们了解的Grunt、Gulp等。</p>\n\n<p><strong>Grunt</strong><br></br>Grunt 有大量现成的插件可以使用，也能管理任务之间的依赖关系，自动化执行依赖的任务，每个任务的具体执行代码和依赖关系写在配置文件 Gruntfile.js 里。grunt的好处就是灵活，只执行定义好的任务，同时也有大量的可复用的插件。但是grunt集成度不高，需要手动编写很多配置，不能上手即用。</p>\n\n<p><strong>Gulp</strong><br></br>gulp是一个基于自动化的构建工具，除了可以管理和执行任务，还支持监听文件、读写文件。gulp引入了流的概念，流可以在插件间传递。相较于grunt，gulp的功能更完善，但是仍然存在集成度不高需要手动配置的问题。</p>\n\n<p><strong>Webpack</strong><br></br>webpack是一个打包模块化 JavaScript 的工具，在 Webpack 里一切文件皆模块，通过 Loader 转换文件，通过 Plugin 注入钩子，最后输出由多个模块组合成的文件。Webpack 专注于构建模块化项目。webpack具有很大的灵活性和拓展性，专注模块化开发，可以做到开箱即用，同时使用场景不仅限于Web开发，具有良好的开发体验。<br></br>现在社区里面基于webpack的脚手架大致有： react 的 create-react-app 、 vue 的 vue-cli 、 Angular 的 angular-cli等。</p>\n\n<h3 id='2. 安装'>2. 安装</h3>\n\n<p>首先输入指令 <code>npm install webpack webpack-cli -g</code> 安装webback，指令 <code>npm init</code> 安装package.json文件。Webpack 在执行构建时默认会从项目根目录下的 webpack.config.js 文件读取配置，所以我们需要手动新建该文件。前期的准备工作结束，下面我们就开始进入神奇的webpack世界了！</p>\n\n<h3 id='3. 入口与输出'>3. 入口与输出</h3>\n\n<p>在多个代码模块中会有一个起始的 .js 文件，我们将此文件作为 webpack 构建的入口，同时webpack支持多个入口配置，如下代码配置：</p>\n\n<pre><code><span></span>\n<span>module.exports = {'{'}</span>\n<span>  entry: './src/index.js' </span>\n<span>}</span>\n<span></span>\n</code></pre>\n\n<p>webpack的输出指的是webpack最终构建出来的静态文件。通过output字段定义,如下所示：</p>\n\n<pre><code><span></span>\n<span>module.exports = {'{'}</span>\n<span>    //...</span>\n<span>    output: {'{'}</span>\n<span>        path: __dirname + '/dist',// __dirname指向被js文件执行的绝对路径</span>\n<span>        filename: 'assets/index[hash].js',// [hash]可以保证每次文件名都不相同</span>\n<span>    },</span>\n<span>    //...</span>\n<span>}</span>\n<span></span>\n</code></pre>\n\n<h3 id='4. Loader'>4. Loader</h3>\n\n<p>Loader 可以看作是 webpack 的转换器或者“翻译员”，把代码转换成 webpack 可以打包的模块，在 module.rules 下配置。格式如下：</p>\n\n<pre><code><span></span>\n<span>module.exports = {'{'}</span>\n<span>  // ...</span>\n<span>  module: {'{'}</span>\n<span>    noParse: /jquery|lodash/, // 正则表达式</span>\n<span>    rules: [ </span>\n<span>      {'{'}</span>\n<span>        test: /\\.jsx?/, // 文件后缀条件</span>\n<span>        include: [ </span>\n<span>          path.resolve(__dirname, 'src'),</span>\n<span>        ], // 文件所在路径位置条件</span>\n<span>        use: 'babel-loader', // 规则应用结果\u000e</span>\n<span>      },</span>\n<span>      // ...</span>\n<span>    ],</span>\n<span>  },</span>\n<span>}...</span>\n<span></span>\n</code></pre>\n\n<p><strong>匹配规则</strong>（字符串、正则、函数、数组、对象）：<br></br>* {'{'} test: ... } 匹配特定条件 <br></br>* {'{'} include: ... } 匹配特定路径 <br></br>* {'{'} exclude: ... } 排除特定路径 <br></br>* {'{'} and: [...] }必须匹配数组中所有条件 <br></br>* {'{'} or: [...] } 匹配数组中任意一个条件 <br></br>* {'{'} not: [...] } 排除匹配数组中所有条件</p>\n\n<p><strong>执行顺序</strong><br></br>执行顺序是从最后配置的 loader 开始，一步步往前执行。<br></br>rule.enforce 可以设置 loader 种类，默认为普通，可以设置 “pre”（前置）、post（后置），还有一个额外的种类\"行内 loader\"，被应用在 import/require 行内。<br></br>种类的执行优先级：前置>行内>普通>后置</p>\n\n<p><strong>noPrase</strong><br></br>不需要解析依赖的第三方类库可以配置在 noParse 中，但是需注意使用 noParse 进行忽略的模块文件中不能使用 import、require、define 等导入机制。</p>\n\n<h3 id='5. Plugin'>5. Plugin</h3>\n\n<p>Plugin 是用来扩展 Webpack 功能的，处理其他的构建任务，模块转换的工作给 loader 做，剩下的工作由 plugin 完成。，通过在构建流程里注入钩子实现，它给 Webpack 带来了很大的灵活性。plugin安装后需要手动引入。下面以配置sass示例,注意其中用到了插件<code>extract-text-webpack-plugin</code>在webpack 4.x中没有做支持，所以需要这样引入：<code>npm install extract-text-webpack-plugin@next -D</code></p>\n\n<pre><code><span></span>\n<span>const ExtractTextPlugin = require('extract-text-webpack-plugin') //手动引入</span>\n<span>module.exports = {'{'}</span>\n<span>    //..</span>\n<span>    module:{'{'}</span>\n<span>        rules:[</span>\n<span>            // 这里配置sass文件的Loader</span>\n<span>            {'{'}</span>\n<span>                test: /\\.scss$/,</span>\n<span>                use: ExtractTextPlugin.extract({'{'}</span>\n<span>                    fallback: 'style-loader',//将解析结果转为js代码，动态插入style</span>\n<span>                    use: [ 'sass-loader','css-loader'] //首先将sass转为css,然后处理css的依赖，比如@import、url(）等</span>\n<span>                })</span>\n<span>            },</span>\n<span>            //..</span>\n<span>        ]</span>\n<span>    },</span>\n<span>    plugins: [</span>\n<span>        //..</span>\n<span>        //该plugin作用是单独分离css文件</span>\n<span>        new ExtractTextPlugin('index.css'),//分离css文件，出口index.css</span>\n<span>    ]</span>\n<span>    //..</span>\n<span>}</span>\n<span></span>\n<span></span>\n</code></pre>\n\n<h3 id='6. Resolve'>6. Resolve</h3>\n\n<p>Webpack 在启动后会从配置的入口模块出发找出所有依赖的模块，Resolve 配置 Webpack 如何寻找模块所对应的文件。 Webpack 内置 JavaScript 模块化语法解析功能，默认会采用模块化标准里约定好的规则去寻找，但你也可以根据自己的需要修改默认的规则。<br></br>比如 resolve.alias可以设置路径的映射,直接使用 components 代替 ./src/components/：</p>\n\n<pre><code><span></span>\n<span>resolve:{'{'}</span>\n<span>  alias:{'{'}</span>\n<span>    components: './src/components/'</span>\n<span>  }</span>\n<span>}</span>\n<span></span>\n</code></pre>\n\n<h3 id='总结'>总结</h3>\n\n<ul>\n<li>想让源文件加入到构建流程中去被 Webpack 控制，配置 entry。</li>\n<li>想自定义输出文件的位置和名称，配置 output。</li>\n<li>想自定义寻找依赖模块时的策略，配置 resolve。</li>\n<li>想自定义解析和转换文件的策略，配置 module，通常是配置 module.rules 里的 Loader，其余包括 parser、noParse等等配置。</li>\n<li>其它的大部分需求可能要通过 Plugin 去实现，配置 plugin。</li>\n</ul>\n</div>\n            </div>\n\n        )\n    }\n}"],"sourceRoot":""}